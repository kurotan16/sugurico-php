<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>パスワードリセット - スグリコ</title>
    <link rel="stylesheet" href="../../base/style.css">
    <link rel="stylesheet" href="../css/login.css">
</head>
<body>
    <header id="header-container"></header>
    <main class="form-container">
        <h1>パスワードリセット</h1>
        <div id="message-area" class="message" style="display: none;"></div>

        <!-- ▼▼▼ ステージ1: 本人確認フォーム ▼▼▼ -->
        <div id="verification-stage">
            <p>ご本人様確認のため、登録したログインIDとメールアドレスを入力してください。</p>
            <form id="verification-form">
                <div class="form-group">
                    <label for="loginIdInput">ログインID</label>
                    <input type="text" id="loginIdInput" required>
                </div>
                <div class="form-group">
                    <label for="emailInput">メールアドレス</label>
                    <input type="email" id="emailInput" required>
                </div>
                <button type="submit" id="verifyButton">確認</button>
            </form>
        </div>

        <!-- ▼▼▼ ステージ2: パスワード再設定フォーム (最初は非表示) ▼▼▼ -->
        <form id="reset-stage" style="display: none;">
            <p>新しいパスワードを入力してください。</p>
            <div class="form-group">
                <label for="passwordInput">新しいパスワード</label>
                <input type="password" id="passwordInput" required>
            </div>
            <div class="form-group">
                <label for="confirmPasswordInput">新しいパスワード（確認）</label>
                <input type="password" id="confirmPasswordInput" required>
            </div>
            <button type="submit" id="updateButton">パスワードを更新</button>
        </form>
        
        <a href="login.html" style="margin-top: 20px; display: inline-block;">ログインページに戻る</a>
    </main>
    <footer id="footer-container"></footer>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="../../base/header.js" defer></script>
    <script src="../js/password_reset_request.js"></script>
</body>
</html>